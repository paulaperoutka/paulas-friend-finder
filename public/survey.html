<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="UTF-8">
  <title>Befriender</title>

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/icon" href="../images/favicon.ico">

  <!-- jQuery Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


  <!-- Font Awesome Glyphicons -->
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css"> -->

  <!-- Chosen -->
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script> -->

</head>

<body>

  <div class="container">

    <div class="jumbotron">
      <h1 class="text-center"><span class="glyphicon glyphicon-bold"></span>efriender</h1>
      <hr>
      <h2 class="text-center">Complete all of the questions below then click to befriend someone new!</h2>

      <br>
    </div>
    
    <!-- Personal Info -->
    <div class="row" id="details">
      <div class="col-md-12">
        <h2>About you:</h2>
        <h3>What is your first name?</h3>
        <input type="text" id="name" class="form-control" required="">
        <br>
        <h3>Please provide the link to a picture of yourself.</h3>
        <input type="text" id="pic" class="form-control" required="">
      </div>
    </div>
    
    <br>
    <hr>
    <!-- Questions -->
    <div class="row" id="questions"> 
      <div class="col-md-12">
        <h2>Tell us more:</h2>

        <h3>1. I radiate joy!</h3>
          <select class="question" id="Q1">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>2. I get chores done right away.</h3>
          <select class="question" id="Q2">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>3. I seek adventure.</h3>
          <select class="question" id="Q3">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>4. I get upset easily.</h3>
          <select class="question" id="Q4">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>5. I trust what people say.</h3>
          <select class="question" id="Q5">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>6. I can't make up my mind.</h3>
          <select class="question" id="Q6">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>7. I am comfortable around others.</h3>
          <select class="question" id="Q7">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>8. I consider myself an average person.</h3>
          <select class="question" id="Q8">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>9. I see beauty in things that others might not notice.</h3>
          <select class="question" id="Q9">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        <h3>10. I believe that there is no absolute right or wrong.</h3>
          <select class="question" id="Q10">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2 (Moderately Disagree)</option>
            <option value="3">3 (Neutral)</option>
            <option value="4">4 (Moderately Agree)</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        
        <hr>
        <h2 class="text-center">That's it! Now find your bestie: </h2>

      </div>
    </div>
    
    <br>
    
    <div class="row text-center" id="befriend"> 
      <div class="col-md-12">
        <a href="/survey"><button type="button" class="btn btn-lg btn-success" id="befriend-btn">Befriend <span class="glyphicon glyphicon-random"></span></button></a>
      </div>
    </div>

    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Friends List</a> | <!-- <a href="/public/home.html">Heroku Repo</a> --></p>
      </div>
    </footer>

  </div>
  
<!-- Modal -->
  <div class="modal fade" id="friend-modal" tabindex="-1" role="dialog" aria-labelledby="newFriendTitle" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newFriendTitle">Your new best friend is...</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
<!-- modal content here -->
        <h4 class="modal-title"><span id="friend-name"></span></h4>
        <br>
        <img class="img-responsive" id="friend-pic">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>


</body>

</html>

<script type="text/javascript">
  $("#befriend-btn").on("click", (event)=> {
    event.preventDefault();
    console.log("Clicked.");
    if($("#name").val() && $("#pic").val() && $(".question").val() !== "Select"){
      let newSurvey = {
        name: $("#name").val().trim(),
        photo: $("#pic").val().trim(),
        scores: [
          $("#Q1").val(),
          $("#Q2").val(),
          $("#Q3").val(),
          $("#Q4").val(),
          $("#Q5").val(),
          $("#Q6").val(),
          $("#Q7").val(),
          $("#Q8").val(),
          $("#Q9").val(),
          $("#Q10").val()
        ]
      };

      $.post("/api/friends", newSurvey, (data) => {
        if (data) {
          $("#friend-name").html(data.name);
          $("#friend-pic").attr("src", data.photo);
          $('#friend-modal').modal("toggle");
        }

        else {
          $("#friend-name").text("We encountered a slight problem.  Try again if you wish to make friends!");
          $("#friend-img").attr("src", "https://cdn.pixabay.com/photo/2012/05/07/12/03/frog-48234_1280.pnghttps://media.giphy.com/media/73h3LBWraONTW/giphy.gif");
          $("#friend-modal").modal("toggle");
        }

        $("#name").val("");
        $("#pic").val("");
        $(".question").val("0");
      });
    }

    else{
      console.log("Clicked but bad.");
      $("#friend-name").text("No one yet! Please complete all fields in order for us to find you a friend.");
      $("#friend-pic").attr("src", "https://media.giphy.com/media/C9AuY1VOvurxm/giphy.gif");
      $('#friend-modal').modal("toggle");
    }
  });
</script>
